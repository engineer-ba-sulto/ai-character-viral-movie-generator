# 実装計画: shadcn/ui による UI 改善

**ブランチ**: `002-improve-ui-with-shadcn` | **日付**: 2025-10-07 | **仕様書**: [spec.md](./spec.md)
**入力**: `/specs/002-improve-ui-with-shadcn/spec.md` からの機能仕様

## 実行フロー (`/plan` コマンドのスコープ)

```
1. 入力パスから機能仕様を読み込む
   → 見つからない場合: ERROR "No feature spec at {path}"
2. 技術的コンテキストを記入する (NEEDS CLARIFICATIONをスキャン)
   → ファイルシステム構造またはコンテキストからプロジェクトタイプを検出 (web=frontend+backend, mobile=app+api)
   → プロジェクトタイプに基づいて構造決定を設定
3. 憲章ドキュメントの内容に基づいて憲章チェックセクションを記入する
4. 以下の憲章チェックセクションを評価する
   → 違反が存在する場合: 複雑性追跡に記録
   → 正当化が不可能な場合: ERROR "Simplify approach first"
   → 進捗追跡を更新: 初期憲章チェック
5. フェーズ0を実行 → research.md
   → 未解決のNEEDS CLARIFICATIONが残っている場合: ERROR "Resolve unknowns"
6. フェーズ1を実行 → contracts, data-model.md, quickstart.md, エージェント固有のテンプレートファイル
7. 憲章チェックセクションを再評価する
   → 新たな違反がある場合: 設計をリファクタリングし、フェーズ1に戻る
   → 進捗追跡を更新: 設計後の憲章チェック
8. フェーズ2を計画 → タスク生成アプローチを記述 (tasks.mdは作成しない)
9. 停止 - `/tasks` コマンドの準備完了
```

**重要**: `/plan` コマンドはステップ 7 で停止します。フェーズ 2-4 は他のコマンドによって実行されます:

- フェーズ 2: `/tasks` コマンドが `tasks.md` を作成
- フェーズ 3-4: 実装の実行 (手動またはツール経由)

## 概要

この計画は、`shadcn/ui` を統合してアプリケーションのユーザーインターフェースを強化し、既存の基本的なコンポーネントをモダンでレスポンシブ、かつ一貫性のある UI 要素に置き換えることを目的としています。

## 技術的コンテキスト

**言語/バージョン**: TypeScript 5+
**主要な依存関係**: Next.js 15+, React 19+, shadcn/ui
**ストレージ**: N/A
**テスト**: 要明確化 (既存のテスト設定が見つからない)
**ターゲットプラットフォーム**: Web
**プロジェクトタイプ**: Web アプリケーション
**パフォーマンス目標**: 現在のパフォーマンスを維持または向上させる
**制約**: N/A
**規模/スコープ**: 既存コンポーネント内の UI 要素を置き換える

## 憲章チェック

_ゲート: フェーズ 0 の調査前に合格する必要があります。フェーズ 1 の設計後に再チェックします。_

- [x] **技術スタック**: 計画は承認された技術スタックを使用していますか？ (`shadcn/ui`は憲章に含まれています)
- [ ] **ファイル/関数サイズ**: 設計は大きすぎるファイルや関数を予測し、回避していますか？ (実装中にチェック)
- [ ] **OOP / モジュール性**: 設計はオブジェクト指向でモジュール化されていますか？ (実装中にチェック)
- [ ] **単一責任**: コンポーネントは単一の明確な責任を持っていますか？ (実装中にチェック)
- [ ] **関心の分離**: UI、ビジネスロジック、状態の間に明確な分離がありますか？ (実装中にチェック)
- [ ] **命名と構造**: 提案されたファイル構造と命名は規約に従っていますか？ (実装中にチェック)
- [ ] **サーバーアクション**: サーバーアクションはミューテーションのみに正しく使用されていますか？ (この機能には適用されません)

## プロジェクト構造

### ドキュメント (この機能)

```
specs/002-improve-ui-with-shadcn/
├── plan.md              # このファイル (`/plan` コマンドの出力)
├── research.md          # フェーズ0の出力 (`/plan` コマンド)
├── data-model.md        # フェーズ1の出力 (`/plan` コマンド)
├── quickstart.md        # フェーズ1の出力 (`/plan` コマンド)
├── contracts/           # フェーズ1の出力 (`/plan` コマンド)
└── tasks.md             # フェーズ2の出力 (`/tasks` コマンド - `/plan` では作成されない)
```

### ソースコード (リポジトリルート)

```
# Webアプリケーション構造
src/
├── app/
├── components/
│   ├── ui/             # shadcn/ui コンポーネントがここに追加される
│   └── ...             # リファクタリング対象の既存コンポーネント
├── constants/
├── types/
└── utils/
```

**構造決定**: プロジェクトは憲章で定義された「Web アプリケーション」構造に従います。`shadcn/ui`コンポーネントは `src/components/ui` ディレクトリに初期化されます。これは `shadcn/ui` の規約とプロジェクトの憲章の両方と一致しています。

## フェーズ 0: 概要と調査

1.  **上記の技術的コンテキストから不明点を抽出**:
    - Next.js アプリケーションでテストを設定するためのベストプラクティスを調査する。
2.  **調査エージェントを生成してディスパッチ**:
    - タスク: 「App Router を使用した Next.js 15+プロジェクト向けの`shadcn/ui`のインストールと設定を調査する。」
    - タスク: 「`shadcn/ui`コンポーネントを使用するようにリファクタリングする必要がある各コンポーネントのタスク。」
    - タスク: 「ブランドに合わせて`shadcn/ui`のテーマ設定とカスタマイズの戦略を定義する。」
3.  **調査結果を `research.md` に統合する**。

**出力**: `research.md`（すべての「要明確化」が解決済み）

## フェーズ 1: 設計と契約

_前提条件: `research.md` が完了していること_

1.  **データモデル**: データモデルに変更は予定されていません。`data-model.md` にその旨を記載します。
2.  **API 契約**: API の変更は予定されていません。`/contracts` ディレクトリは作成されません。
3.  **クイックスタートガイド**: アプリケーションを実行し、新しい UI コンポーネントが正しくレンダリングされることを確認する手順を記載した `quickstart.md` を作成します。
4.  **エージェントファイルを増分更新**: `.specify/scripts/bash/update-agent-context.sh cursor` を実行します。

**出力**: data-model.md, quickstart.md

## フェーズ 2: タスク計画アプローチ

_このセクションは `/tasks` コマンドが何をするかを記述するものであり、`/plan` 中には実行されません_

**タスク生成戦略**:

- プロジェクトに `shadcn/ui` を初期化するタスク。
- `shadcn/ui` コンポーネントを使用するようにリファクタリングする必要がある各コンポーネントのタスク。
- タスクは `research.md` の調査結果に基づいて生成されます。

**順序付け戦略**:

- 最初に `shadcn/ui` を初期化する。
- ページ固有のコンポーネントの前に共有コンポーネントをリファクタリングする。

**推定出力**: `tasks.md` に 10〜15 個の番号付き、順序付けされたタスク。

**重要**: このフェーズは `/tasks` コマンドによって実行され、`/plan` によっては実行されません。

## フェーズ 3 以降: 将来の実装

_これらのフェーズは `/plan` コマンドのスコープ外です_

**フェーズ 3**: タスク実行 (`/tasks` コマンドが `tasks.md` を作成)
**フェーズ 4**: 実装 (憲章の原則に従って `tasks.md` を実行)
**フェーズ 5**: 検証 (テストの実行、`quickstart.md` の実行、パフォーマンス検証)

## 複雑性追跡

_憲章チェックに正当化が必要な違反がある場合にのみ記入_

| 違反 | なぜ必要か | より単純な代替案が拒否された理由 |
| ---- | ---------- | -------------------------------- |
| N/A  |            |                                  |

## 進捗追跡

_このチェックリストは実行フロー中に更新されます_

**フェーズステータス**:

- [x] フェーズ 0: 調査完了 (`/plan` コマンド)
- [x] フェーズ 1: 設計完了 (`/plan` コマンド)
- [x] フェーズ 2: タスク計画完了 (`/plan` コマンド - アプローチのみ記述)
- [ ] フェーズ 3: タスク生成完了 (`/tasks` コマンド)
- [ ] フェーズ 4: 実装完了
- [ ] フェーズ 5: 検証合格

**ゲートステータス**:

- [x] 初期憲章チェック: 合格
- [x] 設計後憲章チェック: PASS
- [x] すべての「要明確化」が解決済み
- [ ] 複雑性の逸脱が文書化されている

---

_憲章 v1.0.0 に基づく - `/.specify/memory/constitution.md` を参照_
