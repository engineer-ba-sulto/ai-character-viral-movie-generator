# 機能: Better Auth の実装

## 説明

Cloudflare D1 をデータベースとして利用し、メール/パスワードベースのログインをサポートする形で、ユーザー認証のために Better Auth を統合します。

## ユーザーストーリー

- ユーザーとして、自分のメールアドレスとパスワードを使って新しいアカウントにサインアップしたい。
- ユーザーとして、自分のメールアドレスとパスワードを使ってアカウントにログインしたい。
- ユーザーとして、アカウントからログアウトしたい。

## 要件

### 機能要件

- システムはすべての認証ロジックに Better Auth を使用しなければならない。
- システムはユーザー資格情報とセッション情報を保存するためのデータベースバックエンドとして Cloudflare D1 を使用しなければならない。
- 認証フローは、メールとパスワードによるユーザー登録（サインアップ）とログイン（サインイン）をサポートしなければならない。
- 安全なパスワードハッシュ化とストレージを実装しなければならない。
- セッション管理は安全に処理されなければならない。

### 非機能要件

- 認証プロセスは高速で応答性が高くなければならない。
- 実装は一般的な Web の脆弱性（例：XSS、CSRF）に対して安全でなければならない。

## 確認事項

### セッション

- **セッション持続時間**: ユーザーセッションはどのくらいの期間アクティブであるべきか？
- **セッションの無効化**: どのようなイベントがセッションの無効化を引き起こすべきか（例：パスワード変更、ログアウト）？
- **同時セッション**: ユーザーは異なるデバイスで複数のアクティブなセッションを持つことを許可されるべきか？

## スコープ外

- ソーシャルログイン（例：Google, GitHub）。
- 二要素認証（2FA）。
- パスワード回復（「パスワードを忘れました」）機能。

## 技術的背景

- **フレームワーク**: Next.js
- **認証ライブラリ**: Better Auth (@https://www.better-auth.com/docs/introduction)
- **データベース**: Cloudflare D1
- **参考資料**: @https://github.com/engineer-ba-sulto/the-reactnative-course (注意: これは React Native のコースであり、Next.js プロジェクトへの関連性を評価する必要がある)。
